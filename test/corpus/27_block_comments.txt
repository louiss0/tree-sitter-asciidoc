================================================================================
Basic block comment
================================================================================

Before comment.

////
This is a block comment.
////

After comment.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text)))
  (block_comment
    (BLOCK_COMMENT_START)
    (comment_line)
    (BLOCK_COMMENT_END))
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text))))

================================================================================
Multi-line block comment with special characters
================================================================================

Normal paragraph.

////
Empty lines are preserved in comments:

Even with multiple empty lines

And special characters: //, ===, **bold**, `code`, {commentAttr}
////

Another paragraph.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text)))
  (block_comment
    (BLOCK_COMMENT_START)
    (comment_line)
    (comment_line)
    (comment_line)
    (comment_line)
    (comment_line)
    (BLOCK_COMMENT_END))
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text))))

================================================================================
Single line block comment
================================================================================

Before.

////
Single line comment
////

After.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)))
  (block_comment
    (BLOCK_COMMENT_START)
    (comment_line)
    (BLOCK_COMMENT_END))
  (paragraph
    (inline_seq_nonempty
      (plain_text))))

================================================================================
Multiple block comments
================================================================================

First paragraph.

////
First block comment
////

Second paragraph.

////
Second block comment
with multiple lines
////

Third paragraph.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text)))
  (block_comment
    (BLOCK_COMMENT_START)
    (comment_line)
    (BLOCK_COMMENT_END))
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text)))
  (block_comment
    (BLOCK_COMMENT_START)
    (comment_line)
    (comment_line)
    (BLOCK_COMMENT_END))
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text))))

================================================================================
Block comments with sections
================================================================================

= Document Title

////
Comment before section
////

== Section Header

Content paragraph.

////
Comment after section
////

More content.

--------------------------------------------------------------------------------

(source_file
  (section
    (section_level_1
      (section_marker_1)
      (title)
      (block_comment
        (BLOCK_COMMENT_START)
        (comment_line)
        (BLOCK_COMMENT_END))
      (section_level_2
        (section_marker_2)
        (title)
        (paragraph
          (inline_seq_nonempty
            (plain_text)
            (plain_text)))
        (block_comment
          (BLOCK_COMMENT_START)
          (comment_line)
          (BLOCK_COMMENT_END))
        (paragraph
          (inline_seq_nonempty
            (plain_text)
            (plain_text)))))))

================================================================================
Block comments with nested delimited block markers
================================================================================

////
Nested //// markers should not break parsing
And other delimited block markers like ---- or ====
Are just regular text inside comments
Even code blocks like ``` don't interfere
////

Final paragraph.

--------------------------------------------------------------------------------

(source_file
  (block_comment
    (BLOCK_COMMENT_START)
    (comment_line)
    (comment_line)
    (comment_line)
    (comment_line)
    (BLOCK_COMMENT_END))
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text))))
