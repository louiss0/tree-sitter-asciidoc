================================================================================
Unicode word boundaries in formatting
================================================================================

Text with *héllo* and _naïve_ formatting.

Japanese text with *こんにちは* and _世界_ formatting.

Mathematical symbols: ^α² + β²^ and ~H₂O~ with Unicode.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (text_segment)
      (inline_element
        (emphasis
          (emphasis_constrained
            (emphasis_open)
            (emphasis_text)
            (emphasis_close))))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (text_segment)
      (inline_element
        (emphasis
          (emphasis_constrained
            (emphasis_open)
            (emphasis_text)
            (emphasis_close))))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (superscript
          (superscript_open)
          (superscript_text)
          (superscript_close)))
      (text_segment)
      (inline_element
        (subscript
          (subscript_open)
          (subscript_text)
          (subscript_close)))
      (text_segment)
      (text_segment))))

================================================================================
Delimiter adjacency and escape handling
================================================================================

Adjacent *strong* and _emphasis_ formatting.

Escaped \*not strong\* and \_not emphasis\_.

Mixed: *strong _with emphasis_ inside*.

Monospace with `code *not strong* here` content.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (text_segment)
      (inline_element
        (emphasis
          (emphasis_constrained
            (emphasis_open)
            (emphasis_text)
            (emphasis_close))))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (text_segment)
      (text_segment)
      (inline_element
        (emphasis
          (emphasis_constrained
            (emphasis_open)
            (emphasis_text)
            (emphasis_close))))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_colon)
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (monospace
          (monospace_constrained
            (monospace_open)
            (monospace_text)
            (monospace_close))))
      (text_segment))))

================================================================================
Complex autolink boundary detection
================================================================================

Visit https://example.com/path?query=value&other=test for more.

Link with punctuation: https://docs.com/api#section.

Multiple URLs: https://first.com, https://second.org! 

Email addresses: contact@example.com.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (inline_element
        (auto_link))
      (text_segment)
      (text_segment)
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (auto_link))))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (auto_link))
      (text_segment)
      (inline_element
        (auto_link))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (text_segment))))

================================================================================
Role spans with complex attributes
================================================================================

[.highlight]#Important text# with role.

[.red.bold#special]#Custom styling# with multiple attributes.

[%nowrap]#No wrap content# with options.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_bracket)
      (text_segment)
      (text_segment)
      (text_segment)
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (text_bracket)
      (text_segment)
      (text_segment)
      (text_segment)
      (text_segment)
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (text_bracket)
      (text_segment)
      (text_segment)
      (text_segment)
      (text_segment)
      (text_segment))))

================================================================================
Nested formatting edge cases
================================================================================

*Strong with `code` inside* normal text.

_Emphasis with ^superscript^ and ~subscript~ mixed_.

**Unconstrained **with** double** asterisks.

++Complex `monospace with _emphasis_` not parsed++ content.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (inline_element
        (strong
          (strong_constrained
            open: (strong_open)
            content: (strong_text)
            close: (strong_close))))
      (text_segment)
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (inline_element
        (emphasis
          (emphasis_constrained
            open: (emphasis_open)
            content: (emphasis_text)
            close: (emphasis_close))))
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (inline_element
        (strong
          (strong_constrained
            open: (strong_open)
            close: (strong_close))))
      (inline_element
        (strong
          (strong_constrained
            open: (strong_open)
            content: (strong_text)
            close: (strong_close))))
      (inline_element
        (strong
          (strong_constrained
            open: (strong_open)
            close: (strong_close))))
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (inline_element
        (passthrough_triple_plus))
      (text_segment))))

================================================================================
Macro and attribute edge cases
================================================================================

Multiple attributes: kbd:[Ctrl+Alt+Del] and btn:[Submit].

Math notation: stem:[E = mc^2] and asciimath:[sum_(i=1)^n x_i].

Footnote variations: footnote:[Simple note] and footnoteref:ref1[Referenced note].

Complex image: image::path/file.png[Alt text,width=100,height=50].

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (ui_macro
          (ui_kbd)))
      (text_segment)
      (inline_element
        (ui_macro
          (ui_btn)))
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (math_macro))
      (text_segment)
      (inline_element
        (math_macro))
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (footnote_inline))
      (text_segment)
      (inline_element
        (footnoteref))
      (text_segment)))
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (inline_element
        (image))
      (text_segment))))

================================================================================
Cross-reference and anchor combinations
================================================================================

See <<introduction>> for basics and <<advanced,Advanced Topics>>.

External references: xref:guide.adoc[User Guide] and xref:api.adoc#methods[API Methods].

Mixed anchors: [[bookmark]] and [[custom,Custom Label]] text.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (inline_element
        (internal_xref))
      (text_segment)
      (text_segment)
      (text_segment)
      (inline_element
        (internal_xref))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (external_xref))
      (text_segment)
      (inline_element
        (external_xref))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (inline_anchor))
      (text_segment)
      (inline_element
        (inline_anchor))
      (text_segment))))

================================================================================
Passthrough and raw content edge cases
================================================================================

Inline passthrough: pass:[<script>alert('test')</script>] content.

Triple plus passthrough: +++<div class="raw">HTML content</div>+++ text.

Nested pass: pass:c[{code-block}] with substitution.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (pass_macro))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (passthrough_triple_plus))
      (text_segment)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (text_colon)
      (inline_element
        (pass_macro))
      (text_segment)
      (text_segment))))
