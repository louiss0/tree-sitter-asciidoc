================================================================================
Basic stem inline macro
================================================================================

The quadratic formula is stem:[x = (-b +- sqrt(b^2-4ac))/(2a)].

---

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text)
      (plain_text)
      (plain_text)
      (inline_macro
        (macro_name)
        (macro_body)
        (macro_close))
      (plain_dot
        (PLAIN_DOT)))))

================================================================================
LaTeX math inline macro
================================================================================

Einstein's equation: latexmath:[\sum_{i=1}^n x_i = x_1 + x_2 + \cdots + x_n]

---

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_quote)
      (plain_text)
      (plain_text)
      (plain_colon)
      (inline_macro
        (macro_name)
        (macro_body)
        (macro_close)))))

================================================================================
AsciiMath inline macro
================================================================================

Series sum: asciimath:[sum_(i=1)^n x_i = (n(n+1))/2]

---

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text)
      (plain_colon)
      (inline_macro
        (macro_name)
        (macro_body)
        (macro_close)))))

================================================================================
Multiple math macros in one paragraph
================================================================================

Compare stem:[a^2 + b^2] with latexmath:[c^2] and asciimath:[d^2].

---

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (inline_macro
        (macro_name)
        (macro_body)
        (macro_close))
      (plain_text)
      (inline_macro
        (macro_name)
        (macro_body)
        (macro_close))
      (plain_text)
      (inline_macro
        (macro_name)
        (macro_body)
        (macro_close))
      (plain_dot
        (PLAIN_DOT)))))

================================================================================
Math macro with complex content
================================================================================

Integration formula: latexmath:[\int u \, dv = uv - \int v \, du]

---

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_text)
      (plain_colon)
      (inline_macro
        (macro_name)
        (macro_body)
        (macro_close)))))

================================================================================
Empty math macro
================================================================================

Empty stem:[] macro should work.

---

(source_file
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (inline_macro
        (macro_name)
        (macro_close))
      (plain_text)
      (plain_text)
      (plain_text)
      (plain_dot
        (PLAIN_DOT)))))
