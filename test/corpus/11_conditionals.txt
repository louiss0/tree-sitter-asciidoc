================================================================================
Basic ifdef block
================================================================================

:backend: pdf

ifdef::backend[]
== PDF Content
Paragraph under conditional.
endif::[]

--------------------------------------------------------------------------------

(source_file
  (attribute_entry
    (attribute_value))
  (conditional_block
    (ifdef_block
      (ifdef_open)
      (section
        (section_level_2
          (section_marker_2)
          (title)
          (paragraph
            (text_with_inlines
              (text_segment)
              (text_segment)
              (text_segment)))))
      (endif_directive))))

================================================================================
Basic ifndef block
================================================================================

ifndef::draft[]
Final content only.
endif::[]

--------------------------------------------------------------------------------

(source_file
  (conditional_block
    (ifndef_block
      (ifndef_open)
      (paragraph
        (text_with_inlines
          (text_segment)
          (text_segment)
          (text_segment)))
      (endif_directive))))

================================================================================
Basic ifeval block
================================================================================

:level: 2

ifeval::[{level} > 1]
== Title
Content for level greater than 1.
endif::[]

--------------------------------------------------------------------------------

(source_file
  (attribute_entry
    (attribute_value))
  (conditional_block
    (ifeval_block
      (ifeval_open)
      (section
        (section_level_2
          (section_marker_2)
          (title)
          (paragraph
            (text_with_inlines
              (text_segment)
              (text_segment)
              (text_segment)
              (text_segment)
              (text_segment)
              (text_segment)))))
      (endif_directive))))

================================================================================
Nested conditionals
================================================================================

ifdef::a[]
ifdef::b[]
Inner content
endif::[]
endif::[]

--------------------------------------------------------------------------------

(source_file
  (conditional_block
    (ifdef_block
      (ifdef_open)
      (conditional_block
        (ifdef_block
          (ifdef_open)
          (paragraph
            (text_with_inlines
              (text_segment)
              (text_segment)))
          (endif_directive)))
      (endif_directive))))

================================================================================
Mixed conditional and description list
================================================================================

Term:: definition

ifdef::flag[]
Content inside conditional
endif::[]

Another:: item

--------------------------------------------------------------------------------

(source_file
  (description_list
    (description_item
      (description_content
        (text_with_inlines
          (text_segment)))))
  (conditional_block
    (ifdef_block
      (ifdef_open)
      (paragraph
        (text_with_inlines
          (text_segment)
          (text_segment)
          (text_segment)))
      (endif_directive)))
  (description_list
    (description_item
      (description_content
        (text_with_inlines
          (text_segment))))))

================================================================================
Multiple attribute targets
================================================================================

ifdef::attr1,attr2,attr3[]
Multiple attributes checked
endif::[]

--------------------------------------------------------------------------------

(source_file
  (conditional_block
    (ifdef_block
      (ifdef_open)
      (paragraph
        (text_with_inlines
          (text_segment)
          (text_segment)
          (text_segment)))
      (endif_directive))))

================================================================================
Conditional with lists and sections
================================================================================

ifdef::backend[]
== Section in conditional

- List item 1
- List item 2

1. Ordered item
2. Another item

Another paragraph
endif::[]

--------------------------------------------------------------------------------

(source_file
  (conditional_block
    (ifdef_block
      (ifdef_open)
      (section
        (section_level_2
          (section_marker_2)
          (title)
          (unordered_list
            (unordered_list_item
              (text_with_inlines
                (text_segment)
                (text_segment)
                (text_segment)))
            (unordered_list_item
              (text_with_inlines
                (text_segment)
                (text_segment)
                (text_segment))))
          (ordered_list
            (ordered_list_item
              (text_with_inlines
                (text_segment)
                (text_segment)))
            (ordered_list_item
              (text_with_inlines
                (text_segment)
                (text_segment))))
          (paragraph
            (text_with_inlines
              (text_segment)
              (text_segment)))))
      (endif_directive))))

================================================================================
Empty conditional block
================================================================================

ifdef::nonexistent[]
endif::[]

Normal content

--------------------------------------------------------------------------------

(source_file
  (conditional_block
    (ifdef_block
      (ifdef_open)
      (endif_directive)))
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment))))

================================================================================
Complex ifeval expression
================================================================================

ifeval::["{version}" >= "2.0"]
New feature content
endif::[]

--------------------------------------------------------------------------------

(source_file
  (conditional_block
    (ifeval_block
      (ifeval_open)
      (paragraph
        (text_with_inlines
          (text_segment)
          (text_segment)
          (text_segment)))
      (endif_directive))))
