================================================================================
Nested delimited blocks
================================================================================

====
Example block with content.

----
Nested listing block inside example.
Code content here.
----

More example content.
====

--------------------------------------------------------------------------------

(source_file
  (example_block
    (example_open
      (EXAMPLE_FENCE_START))
    (block_content
      (content_line
        (DELIMITED_BLOCK_CONTENT_LINE))
      (content_line
        (DELIMITED_BLOCK_CONTENT_LINE))
      (content_line
        (DELIMITED_BLOCK_CONTENT_LINE))
      (content_line
        (DELIMITED_BLOCK_CONTENT_LINE))
      (content_line
        (DELIMITED_BLOCK_CONTENT_LINE))
      (content_line
        (DELIMITED_BLOCK_CONTENT_LINE)))
    (example_close
      (EXAMPLE_FENCE_END))))

================================================================================
Complex table structures
================================================================================

[options="header"]
|===
| Name | Age | City

| Alice
| 30
| New York

2+| Merged cell content
| Single cell

| Bob | 25 | London
|===

--------------------------------------------------------------------------------

(source_file
  (table_block
    metadata: (metadata
      attributes: (block_attributes
        (ATTRIBUTE_LIST_START)))
    open: (table_open
      (TABLE_FENCE_START))
    content: (table_content
      row: (table_row
        cells: (table_cell
          content: (cell_content
            (cell_literal_text)))
        cells: (table_cell
          content: (cell_content
            (cell_literal_text)))
        cells: (table_cell
          content: (cell_content
            (cell_literal_text))))
      (content_line)
      row: (table_row
        cells: (table_cell
          content: (cell_content
            (cell_literal_text))))
      row: (table_row
        cells: (table_cell
          content: (cell_content
            (cell_literal_text))))
      row: (table_row
        cells: (table_cell
          content: (cell_content
            (cell_literal_text))))
      (content_line)
      (content_line)
      row: (table_row
        cells: (table_cell
          content: (cell_content
            (cell_literal_text))))
      (content_line)
      row: (table_row
        cells: (table_cell
          content: (cell_content
            (cell_literal_text)))
        cells: (table_cell
          content: (cell_content
            (cell_literal_text)))
        cells: (table_cell
          content: (cell_content
            (cell_literal_text)))))
    close: (table_close
      (TABLE_FENCE_END))))

====
Example block as continuation.
====

2. Second item with inline content.

3. Third item
+
--
Open block continuation.
--

--------------------------------------------------------------------------------

(source_file
  (ordered_list
    items: (ordered_list_item
      marker: (ordered_list_marker)
      content: (inline_seq_nonempty
        (plain_text)
        (plain_text)
        (plain_text)
        (plain_text)
        (plain_text))))
  (ordered_list
    items: (ordered_list_item
      marker: (ordered_list_marker)
      content: (inline_seq_nonempty
        (plain_text)
        (plain_text))
      content: (inline_seq_nonempty
        (plain_text))))
  (open_block
    open: (openblock_open
      (OPENBLOCK_FENCE_START))
    content: (block_content
      (content_line
        (DELIMITED_BLOCK_CONTENT_LINE)))
    close: (openblock_close
      (OPENBLOCK_FENCE_END))))

================================================================================
Conditional blocks with nesting
================================================================================

ifdef::draft[]
Draft content here.

ifndef::production[]
Development notes.

ifeval::["{version}" >= "2.0"]
Version 2.0+ features.
endif::[]

Back to development notes.
endif::[]

Final draft content.
endif::[]

Production content.

--------------------------------------------------------------------------------

(source_file
  (conditional_block
    (ifdef_block
      directive: (ifdef_open)
      content: (paragraph
        content: (inline_seq_nonempty
          (plain_text)
          (plain_text)
          (plain_text)))
      content: (conditional_block
        (ifndef_block
          directive: (ifndef_open)
          content: (paragraph
            content: (inline_seq_nonempty
              (plain_text)
              (plain_text)))
          content: (conditional_block
            (ifeval_block
              directive: (ifeval_open)
              content: (paragraph
                content: (inline_seq_nonempty
                  (plain_text)
                  (plain_text)
                  (plain_text)))
              end: (endif_directive)))
          content: (paragraph
            content: (inline_seq_nonempty
              (plain_text)
              (plain_text)
              (plain_text)
              (plain_text)))
          end: (endif_directive)))
      content: (paragraph
        content: (inline_seq_nonempty
          (plain_text)
          (plain_text)
          (plain_text)))
      end: (endif_directive)))
  (paragraph
    content: (inline_seq_nonempty
      (plain_text)
      (plain_text))))

================================================================================
Complex admonition combinations
================================================================================

NOTE: Simple paragraph admonition.

[IMPORTANT]
====
Block admonition with example content.

WARNING: Nested paragraph admonition inside block.
====

[TIP]
--
Open block admonition.

. Numbered list inside
. With multiple items

Final tip content.
--

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (paragraph_admonition
      (admonition_label)
      (inline_seq_nonempty
        (plain_text)
        (plain_text)
        (plain_text))))
  (block_admonition
    (admonition_attribute
      (ATTRIBUTE_LIST_START))
    (example_block
      (example_open
        (EXAMPLE_FENCE_START))
      (block_content
        (content_line
          (DELIMITED_BLOCK_CONTENT_LINE))
        (content_line
          (DELIMITED_BLOCK_CONTENT_LINE)))
      (example_close
        (EXAMPLE_FENCE_END))))
  (block_admonition
    (admonition_attribute
      (ATTRIBUTE_LIST_START))
    (open_block
      (openblock_open
        (OPENBLOCK_FENCE_START))
      (block_content
        (content_line
          (DELIMITED_BLOCK_CONTENT_LINE))
        (content_line
          (DELIMITED_BLOCK_CONTENT_LINE))
        (content_line
          (DELIMITED_BLOCK_CONTENT_LINE))
        (content_line
          (DELIMITED_BLOCK_CONTENT_LINE)))
      (openblock_close
        (OPENBLOCK_FENCE_END)))))

================================================================================
Section nesting with anchors
================================================================================

= Document Title

[[section1]]
== First Section

Content for first section.

[[section2]]
=== Subsection

More detailed content.

[[section3,Custom Section Title]]
==== Deep Section

Final content with custom anchor.

== Second Top Section

Back to level 2.

--------------------------------------------------------------------------------

(source_file
  (section
    (section_level_1
      marker: (section_marker_1)
      title: (title)
      content: (paragraph
        content: (inline_seq_nonempty
          (inline_element
            (inline_anchor))))
      content: (section_level_2
        marker: (section_marker_2)
        title: (title)
        content: (paragraph
          content: (inline_seq_nonempty
            (plain_text)
            (plain_text)
            (plain_text)
            (plain_text)))
        content: (paragraph
          content: (inline_seq_nonempty
            (inline_element
              (inline_anchor))))
        content: (section_level_3
          marker: (section_marker_3)
          title: (title)
          content: (paragraph
            content: (inline_seq_nonempty
              (plain_text)
              (plain_text)
              (plain_text)))
          content: (paragraph
            content: (inline_seq_nonempty
              (inline_element
                (inline_anchor))))
          content: (section_level_4
            marker: (section_marker_4)
            title: (title)
            content: (paragraph
              content: (inline_seq_nonempty
                (plain_text)
                (plain_text)
                (plain_text)
                (plain_text)
                (plain_text))))))
      content: (section_level_2
        marker: (section_marker_2)
        title: (title)
        content: (paragraph
          content: (inline_seq_nonempty
            (plain_text)
            (plain_text)
            (plain_text)
            (plain_text)))))))

================================================================================
Attribute edge cases with references
================================================================================

:author: John Doe
:version: 2.1.0
:custom-attr: Special value

Author: {author}
Version: {version}
Custom: {custom-attr}

:!disabled-attr:
:enabled-attr!:

Undefined: {undefined-attr}
Disabled: {disabled-attr}
Enabled: {enabled-attr}

--------------------------------------------------------------------------------

(source_file
  (attribute_entry
    (attribute_name
      (PLAIN_COLON))
    (attribute_identifier)
    (attribute_name
      (PLAIN_COLON))
    (attribute_value))
  (attribute_entry
    (attribute_name
      (PLAIN_COLON))
    (attribute_identifier)
    (attribute_name
      (PLAIN_COLON))
    (attribute_value))
  (attribute_entry
    (attribute_name
      (PLAIN_COLON))
    (attribute_identifier)
    (attribute_name
      (PLAIN_COLON))
    (attribute_value))
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_colon
        (PLAIN_COLON))
      (inline_element
        (attribute_reference)))
    (inline_seq_nonempty
      (plain_text)
      (plain_colon
        (PLAIN_COLON))
      (inline_element
        (attribute_reference)))
    (inline_seq_nonempty
      (plain_text)
      (plain_colon
        (PLAIN_COLON))
      (inline_element
        (attribute_reference))))
  (paragraph
    (inline_seq_nonempty
      (plain_colon
        (PLAIN_COLON))
      (plain_text)
      (plain_colon
        (PLAIN_COLON)))
    (inline_seq_nonempty
      (plain_colon
        (PLAIN_COLON))
      (plain_text)
      (plain_colon
        (PLAIN_COLON))))
  (paragraph
    (inline_seq_nonempty
      (plain_text)
      (plain_colon
        (PLAIN_COLON))
      (inline_element
        (attribute_reference)))
    (inline_seq_nonempty
      (plain_text)
      (plain_colon
        (PLAIN_COLON))
      (inline_element
        (attribute_reference)))
    (inline_seq_nonempty
      (plain_text)
      (plain_colon
        (PLAIN_COLON))
      (inline_element
        (attribute_reference)))))
