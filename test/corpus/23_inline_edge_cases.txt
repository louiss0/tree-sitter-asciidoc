================================================================================
URL followed by monospace (precedence test)
================================================================================

Visit http://example.com`code`[link text] for details.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (inline_element
        (link
          url: (auto_link)
          text: (bracketed_text)))
      (text_segment)
      (text_segment))))

================================================================================
Inline inside role span content
================================================================================

This is [important]#*bold* and _italic_ text# here.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (role_span))
      (text_segment))))

================================================================================
Crossing styles (should fallback gracefully)
================================================================================

This is *bold _italic* text_ here.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            open: (strong_open)
            content: (strong_text)
            close: (strong_close))))
      (text_segment))))

================================================================================
Trailing plus without EOL (should not create line_break)
================================================================================

This has a plus+ in the middle.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (text_segment)
      (text_segment)))
  (ERROR
    (content_line)))

================================================================================
Escaped delimiters in strong
================================================================================

This is *bold with \* asterisk* text.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            open: (strong_open)
            content: (strong_text)
            close: (strong_close))))
      (text_segment))))

================================================================================
Escaped delimiters in emphasis
================================================================================

This is _italic with \_ underscore_ text.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (emphasis
          (emphasis_constrained
            open: (emphasis_open)
            content: (emphasis_text)
            close: (emphasis_close))))
      (text_segment))))

================================================================================
Escaped delimiters in monospace
================================================================================

This is `code with \` backtick` text.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (monospace
          (monospace_constrained
            open: (monospace_open)
            content: (monospace_text)
            close: (monospace_close))))
      (text_segment))))

================================================================================
Escaped delimiters in superscript
================================================================================

This is ^super with \^ caret^ text.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (superscript
          open: (superscript_open)
          content: (superscript_text)
          close: (superscript_close)))
      (text_segment))))

================================================================================
Escaped delimiters in subscript
================================================================================

This is ~sub with \~ tilde~ text.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (subscript
          open: (subscript_open)
          content: (subscript_text)
          close: (subscript_close)))
      (text_segment))))

================================================================================
Escaped delimiters in role span
================================================================================

This is [role]#text with \# hash# here.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (role_span))
      (text_segment)
      (text_segment))))

================================================================================
Complex nesting with multiple styles
================================================================================

This is *bold with `mono and ^super^`* text.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (text_segment))))

================================================================================
Attribute reference inside various constructs
================================================================================

This is *bold {name}* and `code {version}` and ^super{level}^.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (text_segment)
      (inline_element
        (monospace
          (monospace_constrained
            (monospace_open)
            (monospace_text)
            (monospace_close))))
      (text_segment)
      (inline_element
        (superscript
          (superscript_open)
          (superscript_text)
          (superscript_close)))
      (text_segment))))

================================================================================
Line break with proper EOL
================================================================================

First line +
Second line here.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (line_break))
      (text_segment)
      (text_segment)
      (text_segment))))

================================================================================
Macro precedence over formatting
================================================================================

Use stem:[a^2 + b^2] and kbd:[Ctrl+*Bold*] commands.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (inline_element
        (math_macro))
      (text_segment)
      (inline_element
        (ui_macro
          (ui_kbd)))
      (text_segment))))

================================================================================
Passthrough precedence over everything
================================================================================

This +++*bold* `code` _italic_+++ is literal.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (inline_element
        (passthrough_triple_plus))
      (text_segment)
      (text_segment))))

================================================================================
Image and link precedence
================================================================================

Use image:logo.png[Logo] and https://example.com[Site] here.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (inline_element
        (image))
      (text_segment)
      (inline_element
        (link
          (auto_link)
          (bracketed_text)))
      (text_segment))))

================================================================================
Multiple consecutive inline elements
================================================================================

*Bold*_italic_`code`^super^~sub~{attr}

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (inline_element
        (strong
          (strong_constrained
            (strong_open)
            (strong_text)
            (strong_close))))
      (inline_element
        (emphasis
          (emphasis_constrained
            (emphasis_open)
            (emphasis_text)
            (emphasis_close))))
      (inline_element
        (monospace
          (monospace_constrained
            (monospace_open)
            (monospace_text)
            (monospace_close))))
      (inline_element
        (superscript
          (superscript_open)
          (superscript_text)
          (superscript_close)))
      (inline_element
        (subscript
          (subscript_open)
          (subscript_text)
          (subscript_close)))
      (inline_element
        (attribute_reference)))))

================================================================================
Empty inline constructs (edge case)
================================================================================

This has ** and __ and `` empty markers.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (strong
          (strong_constrained
            open: (strong_open))))
      (text_segment)
      (inline_element
        (emphasis
          (emphasis_constrained
            open: (emphasis_open))))
      (text_segment)
      (inline_element
        (monospace
          (monospace_constrained
            open: (monospace_open))))
      (text_segment)
      (text_segment))))

================================================================================
Role span with dots in name
================================================================================

This is [role.with.dots]#styled text# here.

--------------------------------------------------------------------------------

(source_file
  (paragraph
    content: (text_with_inlines
      (text_segment)
      (text_segment)
      (inline_element
        (role_span))
      (text_segment))))
